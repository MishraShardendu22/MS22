'use client'

import { NameLoader } from './Loader'
import { useEffect, useRef } from 'react'
import { animate, svg } from 'animejs'

interface LoadingStateProps {
  message?: string
  variant?: 'cyan' | 'blue' | 'purple' | 'pink' | 'emerald'
  fullPage?: boolean
}

const InlineLoader = ({ message = 'Loading...' }: LoadingStateProps) => {
  const dotRef = useRef<HTMLDivElement>(null)
  const pathRef = useRef<SVGPathElement>(null)

  useEffect(() => {
    if (!dotRef.current || !pathRef.current) return

    animate(dotRef.current, {
      ease: 'linear',
      duration: 8000,
      loop: true,
      ...svg.createMotionPath(pathRef.current)
    })

    animate(svg.createDrawable(pathRef.current), {
      draw: '0 1',
      ease: 'linear',
      duration: 8000,
      loop: true
    })
  }, [])

  return (
    <div className="flex items-center justify-center py-8">
      <div className="relative w-full max-w-5xl px-8">
        <svg
          viewBox="0 0 915.869 72.022"
          className="w-full h-auto"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs>
            <linearGradient id="nameGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor="#06b6d4" />
              <stop offset="50%" stopColor="#3b82f6" />
              <stop offset="100%" stopColor="#8b5cf6" />
            </linearGradient>
            <filter id="nameGlow">
              <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          
          <path
            ref={pathRef}
            d="M 623.145 72.021 L 620.166 72.021 L 594.043 20.703 L 594.043 72.021 L 584.033 72.021 L 584.033 2.002 L 594.971 2.002 L 621.631 54.736 L 648.34 2.002 L 659.229 2.002 L 659.229 72.021 L 649.268 72.021 L 649.268 20.703 L 623.145 72.021 Z M 44.971 42.041 L 10.986 42.041 Q 8.936 42.041 7.105 41.235 Q 5.274 40.43 3.906 39.087 Q 2.539 37.744 1.758 35.913 Q 0.977 34.082 0.977 32.031 L 0.977 12.012 Q 0.977 9.961 1.758 8.13 Q 2.539 6.299 3.906 4.956 Q 5.274 3.613 7.105 2.808 Q 8.936 2.002 10.986 2.002 L 44.971 2.002 Q 47.022 2.002 48.853 2.808 Q 50.684 3.613 52.051 4.956 Q 53.418 6.299 54.199 8.13 Q 54.981 9.961 54.981 12.012 L 54.981 21.045 L 44.971 21.045 L 44.971 12.012 L 10.986 12.012 L 10.986 32.031 L 44.971 32.031 Q 47.022 32.031 48.853 32.813 Q 50.684 33.594 52.051 34.961 Q 53.418 36.328 54.199 38.159 Q 54.981 39.99 54.981 42.041 L 54.981 62.012 Q 54.981 64.063 54.199 65.894 Q 53.418 67.725 52.051 69.092 Q 50.684 70.459 48.853 71.24 Q 47.022 72.021 44.971 72.021 L 10.01 72.021 Q 7.959 72.021 6.128 71.24 Q 4.297 70.459 2.93 69.092 Q 1.563 67.725 0.781 65.894 Q 0 64.063 0 62.012 L 0 53.027 L 10.01 53.027 L 10.01 62.012 L 44.971 62.012 L 44.971 42.041 Z M 118.018 29.639 L 118.018 72.021 L 108.399 72.021 L 108.399 29.639 L 81.592 29.639 L 81.592 72.021 L 72.022 72.021 L 72.022 0 L 81.592 0 L 81.592 29.199 Q 81.69 27.295 82.471 25.61 Q 83.252 23.926 84.546 22.681 Q 85.84 21.436 87.549 20.728 Q 89.258 20.02 91.211 20.02 L 108.399 20.02 Q 110.401 20.02 112.158 20.776 Q 113.916 21.533 115.21 22.827 Q 116.504 24.121 117.261 25.879 Q 118.018 27.637 118.018 29.639 Z M 804.883 29.639 L 804.883 72.021 L 795.264 72.021 L 795.264 29.639 L 768.457 29.639 L 768.457 72.021 L 758.887 72.021 L 758.887 0 L 768.457 0 L 768.457 29.199 Q 768.555 27.295 769.336 25.61 Q 770.117 23.926 771.411 22.681 Q 772.705 21.436 774.414 20.728 Q 776.123 20.02 778.076 20.02 L 795.264 20.02 Q 797.266 20.02 799.024 20.776 Q 800.781 21.533 802.075 22.827 Q 803.369 24.121 804.126 25.879 Q 804.883 27.637 804.883 29.639 Z M 701.856 62.402 L 734.277 62.402 L 734.277 50.342 L 711.475 50.342 Q 709.473 50.342 707.715 49.585 Q 705.957 48.828 704.663 47.534 Q 703.369 46.24 702.612 44.482 Q 701.856 42.725 701.856 40.723 L 701.856 29.639 Q 701.856 27.637 702.612 25.879 Q 703.369 24.121 704.663 22.827 Q 705.957 21.533 707.715 20.776 Q 709.473 20.02 711.475 20.02 L 741.895 20.02 L 741.895 29.639 L 711.475 29.639 L 711.475 40.723 L 734.277 40.723 Q 736.279 40.723 738.013 41.479 Q 739.746 42.236 741.065 43.53 Q 742.383 44.824 743.14 46.582 Q 743.897 48.34 743.897 50.342 L 743.897 62.402 Q 743.897 64.404 743.14 66.162 Q 742.383 67.92 741.065 69.214 Q 739.746 70.508 738.013 71.265 Q 736.279 72.021 734.277 72.021 L 701.856 72.021 L 701.856 62.402 Z M 413.037 29.639 L 413.037 72.021 L 403.418 72.021 L 403.418 29.639 L 376.611 29.639 L 376.611 72.021 L 367.041 72.021 L 367.041 20.02 L 376.611 20.02 L 376.611 29.199 Q 376.709 27.295 377.49 25.61 Q 378.272 23.926 379.566 22.681 Q 380.86 21.436 382.568 20.728 Q 384.277 20.02 386.231 20.02 L 403.418 20.02 Q 405.42 20.02 407.178 20.776 Q 408.936 21.533 410.23 22.827 Q 411.524 24.121 412.28 25.879 Q 413.037 27.637 413.037 29.639 Z M 491.065 62.402 L 491.065 20.02 L 500.635 20.02 L 500.635 62.402 L 527.442 62.402 L 527.442 20.02 L 537.061 20.02 L 537.061 72.021 L 527.442 72.021 L 527.442 63.232 Q 527.295 65.039 526.465 66.65 Q 525.635 68.262 524.341 69.458 Q 523.047 70.654 521.387 71.338 Q 519.727 72.021 517.871 72.021 L 500.635 72.021 Q 498.682 72.021 496.924 71.265 Q 495.166 70.508 493.872 69.214 Q 492.578 67.92 491.821 66.162 Q 491.065 64.404 491.065 62.402 Z M 134.033 62.402 L 134.033 49.316 Q 134.033 47.314 134.79 45.581 Q 135.547 43.848 136.841 42.529 Q 138.135 41.211 139.893 40.454 Q 141.651 39.697 143.604 39.697 L 168.408 39.697 L 168.408 29.639 L 137.012 29.639 L 137.012 20.02 L 168.408 20.02 Q 170.41 20.02 172.168 20.776 Q 173.926 21.533 175.22 22.827 Q 176.514 24.121 177.271 25.879 Q 178.027 27.637 178.027 29.639 L 178.027 72.021 L 168.408 72.021 L 168.408 63.232 Q 168.262 65.039 167.432 66.65 Q 166.602 68.262 165.308 69.458 Q 164.014 70.654 162.354 71.338 Q 160.693 72.021 158.838 72.021 L 143.604 72.021 Q 141.651 72.021 139.893 71.265 Q 138.135 70.508 136.841 69.214 Q 135.547 67.92 134.79 66.162 Q 134.033 64.404 134.033 62.402 Z M 871.875 62.402 L 871.875 49.316 Q 871.875 47.314 872.632 45.581 Q 873.389 43.848 874.683 42.529 Q 875.977 41.211 877.735 40.454 Q 879.492 39.697 881.445 39.697 L 906.25 39.697 L 906.25 29.639 L 874.854 29.639 L 874.854 20.02 L 906.25 20.02 Q 908.252 20.02 910.01 20.776 Q 911.768 21.533 913.062 22.827 Q 914.356 24.121 915.112 25.879 Q 915.869 27.637 915.869 29.639 L 915.869 72.021 L 906.25 72.021 L 906.25 63.232 Q 906.104 65.039 905.274 66.65 Q 904.443 68.262 903.15 69.458 Q 901.856 70.654 900.195 71.338 Q 898.535 72.021 896.68 72.021 L 881.445 72.021 Q 879.492 72.021 877.735 71.265 Q 875.977 70.508 874.683 69.214 Q 873.389 67.92 872.632 66.162 Q 871.875 64.404 871.875 62.402 Z M 351.026 29.639 L 351.026 50.928 L 316.602 50.928 L 316.602 62.402 L 351.026 62.402 L 351.026 72.021 L 316.602 72.021 Q 314.649 72.021 312.891 71.265 Q 311.133 70.508 309.839 69.214 Q 308.545 67.92 307.788 66.162 Q 307.031 64.404 307.031 62.402 L 307.031 29.639 Q 307.031 27.637 307.788 25.879 Q 308.545 24.121 309.839 22.827 Q 311.133 21.533 312.891 20.776 Q 314.649 20.02 316.602 20.02 L 341.406 20.02 Q 343.408 20.02 345.166 20.776 Q 346.924 21.533 348.218 22.827 Q 349.512 24.121 350.269 25.879 Q 351.026 27.637 351.026 29.639 Z M 245.02 62.402 L 245.02 29.639 Q 245.02 27.637 245.776 25.879 Q 246.533 24.121 247.827 22.827 Q 249.121 21.533 250.879 20.776 Q 252.637 20.02 254.59 20.02 L 281.397 20.02 L 281.397 0 L 291.016 0 L 291.016 72.021 L 281.397 72.021 L 281.397 63.232 Q 281.25 65.039 280.42 66.65 Q 279.59 68.262 278.296 69.458 Q 277.002 70.654 275.342 71.338 Q 273.682 72.021 271.826 72.021 L 254.59 72.021 Q 252.637 72.021 250.879 71.265 Q 249.121 70.508 247.827 69.214 Q 246.533 67.92 245.776 66.162 Q 245.02 64.404 245.02 62.402 Z M 429.053 62.402 L 429.053 29.639 Q 429.053 27.637 429.81 25.879 Q 430.567 24.121 431.86 22.827 Q 433.154 21.533 434.912 20.776 Q 436.67 20.02 438.623 20.02 L 465.43 20.02 L 465.43 0 L 475.049 0 L 475.049 72.021 L 465.43 72.021 L 465.43 63.232 Q 465.283 65.039 464.453 66.65 Q 463.623 68.262 462.329 69.458 Q 461.035 70.654 459.375 71.338 Q 457.715 72.021 455.86 72.021 L 438.623 72.021 Q 436.67 72.021 434.912 71.265 Q 433.154 70.508 431.86 69.214 Q 430.567 67.92 429.81 66.162 Q 429.053 64.404 429.053 62.402 Z M 223.438 29.639 L 203.613 29.639 L 203.613 72.021 L 194.043 72.021 L 194.043 20.02 L 203.613 20.02 L 203.613 29.199 Q 203.711 27.295 204.492 25.61 Q 205.274 23.926 206.568 22.681 Q 207.861 21.436 209.57 20.728 Q 211.279 20.02 213.233 20.02 L 223.438 20.02 Q 225.44 20.02 227.173 20.776 Q 228.906 21.533 230.225 22.827 Q 231.543 24.121 232.3 25.879 Q 233.057 27.637 233.057 29.639 L 233.057 38.428 L 223.438 38.428 L 223.438 29.639 Z M 850.293 29.639 L 830.469 29.639 L 830.469 72.021 L 820.899 72.021 L 820.899 20.02 L 830.469 20.02 L 830.469 29.199 Q 830.567 27.295 831.348 25.61 Q 832.129 23.926 833.423 22.681 Q 834.717 21.436 836.426 20.728 Q 838.135 20.02 840.088 20.02 L 850.293 20.02 Q 852.295 20.02 854.028 20.776 Q 855.762 21.533 857.08 22.827 Q 858.399 24.121 859.155 25.879 Q 859.912 27.637 859.912 29.639 L 859.912 38.428 L 850.293 38.428 L 850.293 29.639 Z M 676.758 20.02 L 686.377 20.02 L 686.377 72.021 L 676.758 72.021 L 676.758 20.02 Z M 254.59 29.639 L 254.59 62.402 L 281.397 62.402 L 281.397 29.639 L 254.59 29.639 Z M 438.623 29.639 L 438.623 62.402 L 465.43 62.402 L 465.43 29.639 L 438.623 29.639 Z M 143.604 49.316 L 143.604 62.402 L 168.408 62.402 L 168.408 49.316 L 143.604 49.316 Z M 881.445 49.316 L 881.445 62.402 L 906.25 62.402 L 906.25 49.316 L 881.445 49.316 Z M 341.406 29.639 L 316.602 29.639 L 316.602 41.309 L 341.406 41.309 L 341.406 29.639 Z M 676.27 10.01 L 676.27 0 L 686.865 0 L 686.865 10.01 L 676.27 10.01 Z"
            fill="none"
            stroke="url(#nameGradient)"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            filter="url(#nameGlow)"
            opacity="0.8"
          />
        </svg>

        <div
          ref={dotRef}
          className="absolute w-6 h-6 rounded-full"
          style={{
            left: '-12px',
            top: '-12px',
            background: 'radial-gradient(circle, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%)',
            boxShadow: '0 0 20px #06b6d4, 0 0 40px #3b82f6, 0 0 60px #8b5cf6',
          }}
        >
          <div className="absolute inset-1 rounded-full bg-white opacity-60 animate-pulse" />
        </div>

        {message && (
          <p className="text-center text-gray-400 text-sm mt-4">{message}</p>
        )}
      </div>
    </div>
  )
}

export const LoadingState = ({ message, variant, fullPage = false }: LoadingStateProps) => {
  if (fullPage) {
    return <NameLoader />
  }
  
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-gray-950">
      <InlineLoader message={message} />
    </div>
  )
}
